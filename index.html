<!DOCTYPE html>
<html ng-app="myApp">
  <head>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.15/angular.js"></script>
    <title>Learning Angular JS</title>
    <script>
    var myApp = angular.module('myApp',[]);

    myApp.controller('CostCtrl', ['$scope', function($scope) {
      $scope.cost = 0.00;
      $scope.add_tax = true;
      var update = function() {
        $scope.tax = $scope.add_tax ? $scope.cost * 0.15 : 0.0;
        $scope.total = parseFloat($scope.cost) + $scope.tax + $scope.shipping.amount;
      }
      $scope.$watch('cost + add_tax', update); // cost(value) + add_tax(boolean)
      $scope.$watch('cost * tax', update);
      $scope.$watch('shipping', update);
      $scope.$watch('total_bill', function() {
        $scope.bill_display = $scope.total_bill ? 'block' : 'none';
      });
      $scope.final_bill = 0.0;
      $scope.add = function() {
        $scope.final_bill += $scope.total;
      }
      $scope.shipping_options = [
        {amount:10.00, name:"Flat Rate"},
        {amount:20.00, name:"Express"},
        {amount:30.00, name:"Super Express"},
      ];
      $scope.shipping = $scope.shipping_options[0];
    }]);

    </script>
  </head>
  <body>
    <div ng-controller="CostCtrl">
      <div>
        <input type="checkbox" ng-model="add_tax">Add Tax
        <input type="checkbox" ng-model="total_bill">Show Total
      </div>
      Cost: <input type="text" ng-model="cost" placeholder="cost" /></br>
      Shipping: <select ng-model="shipping" ng-options="s.name for s in shipping_options"></select>
      <p>
        This is your cost: {{ cost | currency }}
      </p>
      <p>
        This is your tax: {{ tax | currency }}
      </p>
      <p style="display:{{bill_display}}">
        This is your total: {{ total | currency }}
        <button ng-click="add()">Add</button>
      </p>
      <p style="display:{{bill_display}}">
        Your runnig total is: {{ final_bill | currency }}
      </p>
    </div>

  </body>
</html>
